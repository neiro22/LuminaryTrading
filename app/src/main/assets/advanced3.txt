Введение
Какие бы взлеты и падения ни переживал Биткоин, он все равно остается якорем, который обеспечивает стабильность сообщества. Несмотря на ряд проблем, возникших за годы его существования, таких как взлом биржи Mt. Gox или хардфорки сети, Биткоин продолжает пользоваться поддержкой криптоэнтузиастов.

Однако некоторые недостатки Биткоина невозможно игнорировать, и самый важный из них связан с безопасностью. Поскольку биткоин –  публичный блокчейн, любой желающий может отслеживать транзакции этой сети, что вызывает беспокойство некоторых участников.
Чтобы повысить свою приватность, можно использовать биткоин-миксеры и технологию CoinJoins, впрочем, это не сделает сам биткоин анонимной криптовалютой. И хотя Taproot это тоже неподвластно, его внедрение может повысить анонимность сети. 
Обновление Taproot считается важным шагом на пути к решению вопроса недостаточной конфиденциальности сети и других проблем. Taproot был активирован в сети Биткоина 14 ноября 2021 года при поддержке майнеров со всего мира. Что же такое Taproot и чем он поможет Биткоину? Поговорим об этом подробнее.




Недостатки сети Биткоина
Несмотря на то, что Биткоин является первым и самым популярным блокчейном, он имеет некоторые недостатки, например, низкую скорость транзакций. Первоначально сеть была рассчитана на обработку семи транзакций в секунду, но по мере роста популярности и количества пользователей скорость транзакций и комиссии также росли. В 2021 году средняя комиссия за транзакции в сети Биткоина достигла рекордного уровня после стремительного роста цены монеты и составила около $60. Очевидно, что высокие комиссии и низкая скорость транзакций тормозят развитие сети, поэтому в 2017 году разработчики внедрили обновление Segregated Witness (SegWit) для размещения большего числа транзакций в одном блоке. Однако проблема высоких комиссий все еще остается не решенной. 
Еще один недостаток Биткоина связан с конфиденциальностью. Хотя в whitepaper сети указано, что транзакции Биткоина приватны, в действительности они находятся в открытом доступе. Это означает, что любой пользователь может узнать историю операций, владея только биткоин-адресом. 

Чтобы исправить недостатки, Биткоин время от времени внедряет обновления, навзирая на сложности с изменением сети из-за ее децентрализованного характера. Сложность заключается в том, что один человек не имеет достаточно полномочий, чтобы внедрить обновление, поэтому внесение изменений достигается путем достижения консенсуса в сообществе.

Что такое Taproot
Taproot – это софтфорк для улучшения скриптов Биткоина и повышения конфиденциальности, эффективности, а также способности сети обрабатывать смарт-контракты. Это обновление считается самым значительным изменением Биткоина с момента внедрения SegWit в 2017 году.

Обновление Taproot состоит из трех отдельных предложений по улучшению сети Биткоина (BIP), включая Taproot, Tapscript и его ядро – новую схему цифровой подписи, называемую схемой Шнорра. Taproot предлагает пользователям Биткоина ряд преимуществ, таких как повышенная конфиденциальность транзакций и снижение стоимости комиссий. Обновление также позволит Биткоину выполнять более сложные транзакции, чтобы конкурировать с Ethereum, особенно в отношении смарт-контрактов, поддержки децентрализованных финансов (DeFi) и невзаимозаменяемых токенов (NFT).
В январе 2018 года Taproot был впервые предложен разработчиком Bitcoin Core Грегори Максвеллом, а в октябре 2020 года его интегрировали в библиотеку Bitcoin Core после запроса Питера Вилле. Для полноценной интеграции обновления операторы нод должны были принять новые правила консенсуса Taproot. В конечном итоге оно получило поддержку 90% майнеров и было официально активировано 14 ноября 2021 года на блоке 709632.



Как работает Taproot?
Есть три предложения по улучшению сети Биткоина, совместная активация которых и представляет собой обновление Taproot. При этом каждое предложение по-своему влияет и сообщается с остальными.

Схема Шнорра (BIP340)
Схема Шнорра обеспечивает более быструю и безопасную проверку транзакций в сети Биткоина. Она представляет собой криптографическую схему подписей, разработанную немецким математиком и криптографом Клаусом Шнорром. Этот алгоритм долгие годы был защищен патентом, однако срок его действия истек в 2008 году. Схема Шнорра известна простотой и эффективностью при генерации коротких подписей, а также рядом других преимуществ.
Создатель Биткоина Сатоши Накамото вместо схемы Шнорра выбрал алгоритм цифровой подписи эллиптической кривой (ECDSA): в то время он уже широко использовался, был понятным, надежным, компактным и использовал открытый исходный код.

Однако разработка схемы цифровой подписи Шнорра (SDSS) может положить начало новому поколению подписей для биткоина и других сетей блокчейна.

Одним из основных преимуществ схемы Шнорра является возможность использовать несколько ключей внутри сложной биткоин-транзакции и создавать единую уникальную подпись. Это означает, что подписи нескольких участников транзакции можно объединить в одну схему Шнорра через агрегирование подписей.

Софтфорк Taproot позволяет скрыть сам факт работы скрипта этой криптовалюты. Так, например, он может стереть различия между транзакциями в канале Lightning Network, одноранговой транзакцией и сложным смарт-контрактом: для стороннего наблюдателя все они будут выглядеть как простая одноранговая транзакция. Но стоит отметить, что кошельки исходного отправителя и конечного получателя все равно будут видны.



Taproot (BIP341)
Taproot – это компонент обновления, от которого оно и получило свое название. Он основан на обновлении SegWit 2017 года и использует концепцию Merkelized Alternative Script Tree (MAST) для масштабирования объема данных о транзакциях в блокчейне.

Транзакции Биткоина защищены открытыми и приватными ключами. Чтобы переместить цифровой актив из кошелька, отправитель должен предоставить подпись и доказать, что он настоящий владелец, прежде чем сможет перевести средства. Помимо использования транзакций с одной подписью, отправители также могут их усложнять через тайм-локи, мультиподписи и так далее. 
Однако сложные транзакции требуют нескольких входов и подписей, которые увеличивают объем данных в блокчейне и снижают скорость обработки транзакции. Кроме того, информация о транзакции автоматически сохраняется в блокчейне, что потенциально может раскрыть конфиденциальные данные о владельцах адресов. 

Интеграция MAST позволит уменьшить количество необходимых скриптов и проверок, поскольку одна транзакция будет представлять несколько скриптов. Поэтому, когда сложная биткоин-транзакция отправляется в MAST, для ее обработки не требуется дерево Меркла (от англ. Merkle tree), так как вместо полной информации MAST содержит только условия выполняемой транзакции. Это может значительно уменьшить объем данных, сохраняемых сетью. Таким образом, обновление обеспечивает не только большую масштабируемость и эффективность блокчейна, но и конфиденциальность.



Tapscript (BIP342)
TapScript – это язык кодирования скриптов Биткоина, на котором основана работа двух других BIP. Он представляет собой набор опкодов – инструкций о выполнении транзакции. Считается, что увеличение доступного пространства в блоках обеспечит гибкость сети и позволит Биткоину поддерживать и создавать смарт-контракты.


Возможности Taproot
Как уже было сказано, Taproot значительно повысит конфиденциальность Биткоина и расширит его возможности. К преимуществам обновления относятся:

1. Улучшение масштабируемости сети с помощью уменьшения объема данных для передачи и хранения в блокчейне.

2. Увеличение транзакций на блок (больше транзакций в секунду).
3. Снижение комиссий за транзакции.

Более того, благодаря внедрению Taproot подписи будут оставаться неизменными, что устранит известную угрозу безопасности в сети Биткоин. Сейчас подпись транзакции можно изменить до ее подтверждения, как будто ее никогда и не было, что может повлечь проблему двойного расходования и разрушение целостности распределенного реестра.


Важность обновления Taproot 
Считается, что активация Taproot повысит функциональность сети Биткоина за счет быстрых и надежных транзакций. До Taproot протокол Биткоина все еще находился в разработке на уровне 1, уступая другим сетям уровня 2 с поддержкой DApps, таким как в Ethereum. Обновления Биткоина – важный шаг на пути к развертыванию смарт-контрактов и охвату трендовых рынков NFT и DeFi. 

По мере того как сеть Биткоина становится более эффективной благодаря снижению комиссий, количество транзакций будет увеличиваться, а блокчейн развиваться. Кроме того, возможность приватных транзакций сделает BTC более конкурентоспособным по сравнению с другими конфиденциальными монетами на рынке.




Резюме
Taproot – это долгожданное обновление Биткоина. Вместе с внедрением схемы Шнорра оно значительно повысит конфиденциальность, масштабируемость, безопасность и другие параметры сети. Изменения также должны привлечь больше внимания к протоколу Lightning Network и помочь сделать мультиподпись отраслевым стандартом.

Повышение конфиденциальности, эффективности и безопасности – важные преимущества для всех участников сети биткоин.